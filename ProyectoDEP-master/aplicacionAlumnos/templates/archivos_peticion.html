{% load static %}
<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title> {% block title %} {% endblock %} </title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-wEmeIV1mKuiNpC+IOBjI7aAzPcEZeedi5yW5f2yOq55WWLwNGmvvx4Um1vskeMj0" crossorigin="anonymous">
        <link rel="stylesheet" href="{% static 'css/solicitudes.css'%}">
        <link rel="stylesheet" href="{% static 'css/inicio_administracion.css'%}">
        <link rel="stylesheet" href="{%static 'css/inputs.css'%}">
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Outlined" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Material+Icons+Round" rel="stylesheet">
        <link rel="stylesheet" href="{%static 'css/input.css'%}">
        <link rel="stylesheet" href="{% static 'CSS/drag_drop.css' %}">
        <script src="https://kit.fontawesome.com/b5d7e81e44.js" crossorigin="anonymous"></script>
    </head>


    <body>
        {% if user.groups.all.0.name == 'Alumno' %} {%include 'menu_alumnos.html'%}
        
        {% block content %}
        <div id="main">
            <div class="text-center">
                {% for message in messages %}
                <div class="container-md">
                    <div class="alert alert-warning alert-dismissible fade show" role="alert">
                        <strong>Error!</strong> No puedes enviar un solicitud sin archivos adjuntos.
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
                {% endfor %}
                {% if 'guardado' in request.session %}
                <div class="container-md">
                    <div class="alert alert-primary alert-dismissible fade show" role="alert">
                        <strong>Enviado!</strong> Tu solicitud se ha enviado correctamente, espera actualizaciones en "Mis solicitudes".
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>
                </div>
                {% endif %}
            </div>
            <div class="container" style="width:75%;">
                <h1 class="frase" style="font-weight: 100;">SOLICITUD AL COMITÉ ACADÉMICO</h1>
            </div>
            <div class="container" style="width: 75%;">
                <h3 style="border-radius: 15px; width: auto; background-color: #dee2e6; text-align: center;">Documentación necesaria.</h3>
                <hr>
                <div class="row" style="align-items: center; background-color: #cfdbd5; border-radius: 15px; height: auto;">
                    <h3 style="width: auto; height: auto">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chevron-right" class="svg-inline--fa fa-chevron-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" height="1.5rem" width="1.5rem">
                                <path fill="currentColor" d="M96 480c-8.188 0-16.38-3.125-22.62-9.375c-12.5-12.5-12.5-32.75 0-45.25L242.8 256L73.38 86.63c-12.5-12.5-12.5-32.75 0-45.25s32.75-12.5 45.25 0l192 192c12.5 12.5 12.5 32.75 0 45.25l-192 192C112.4 476.9 104.2 480 96 480z">
                                </path>
                            </svg> Formato de solcitud</h3>
                    <button class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#peticionModal" type="button" style="width: auto; border-radius: 15px; height: auto;">
                            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file" class="svg-inline--fa fa-file" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" height="1.5rem" width="1.5rem">
                                <path fill="currentColor" d="M256 0v128h128L256 0zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128z">
                                </path>
                            </svg>
                            Generar Formato</button>
                </div>
                <hr>
                <h3 style="border-radius: 15px; width: auto; background-color: #dee2e6; text-align: center;">Anexa tus documentos.</h3>
            </div>
            <div class="container mt-4" style="width: 75%;">
                <form action="." method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="drop-area" style="width: 100%; height: auto;">
                        <h4>
                            <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="file-pdf" class="svg-inline--fa fa-file-pdf" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512" height="1.5rem" width="1.5rem">
                                    <path fill="currentColor" d="M184 208c0-4.406-3.594-8-8-8S168 203.6 168 208c0 2.062 .2969 23.31 9.141 50.25C179.1 249.6 184 226.2 184 208zM256 0v128h128L256 0zM80 422.4c0 9.656 10.47 11.97 14.38 6.375C99.27 421.9 108.8 408 120.1 388.6c-14.22 7.969-27.25 17.31-38.02 28.31C80.75 418.3 80 420.3 80 422.4zM224 128L224 0H48C21.49 0 0 21.49 0 48v416C0 490.5 21.49 512 48 512h288c26.51 0 48-21.49 48-48V160h-127.1C238.3 160 224 145.7 224 128zM292 312c24.26 0 44 19.74 44 44c0 24.67-18.94 44-43.13 44c-5.994 0-11.81-.9531-17.22-2.805c-20.06-6.758-38.38-15.96-54.55-27.39c-23.88 5.109-45.46 11.52-64.31 19.1c-14.43 26.31-27.63 46.15-36.37 58.41C112.1 457.8 100.8 464 87.94 464C65.92 464 48 446.1 48 424.1c0-11.92 3.74-21.82 11.18-29.51c16.18-16.52 37.37-30.99 63.02-43.05c11.75-22.83 21.94-46.04 30.33-69.14C136.2 242.4 136 208.4 136 208c0-22.05 17.95-40 40-40c22.06 0 40 17.95 40 40c0 24.1-7.227 55.75-8.938 62.63c-1.006 3.273-2.035 6.516-3.082 9.723c7.83 14.46 17.7 27.21 29.44 38.05C263.1 313.4 284.3 312.1 287.6 312H292zM156.5 354.6c17.98-6.5 36.13-11.44 52.92-15.19c-12.42-12.06-22.17-25.12-29.8-38.16C172.3 320.6 164.4 338.5 156.5 354.6zM292.9 368C299 368 304 363 304 356.9C304 349.4 298.6 344 292 344H288c-.3438 .0313-16.83 .9687-40.95 4.75c11.27 7 24.12 13.19 38.84 18.12C288 367.6 290.5 368 292.9 368z">
                                    </path>
                                </svg> Arrastra y suelta los archivos
                        </h4>
                        <h4>O</h4>
                        <button id="boton">Selecciona tus archivos</button>
                        <input type="file" name="archivos" id="input-file" multiple hidden>
                    </div>
                <div id="preview" style="width: 100%;"></div>
                    <div class="container">
                        <div class="row">
                            <div class="col">
                                <button class="btn btn-warning" type="submit" style="width: 50%; margin: 2rem 25% 3rem 25%; border-radius: 15px;"> Enviar Solicitud</button>
                            </div>                        
                    </div>                    
                </form>
            </div>
        </div>
        <div class="modal fade" id="peticionModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">Generar Solicitud de Comité Académico</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="container">
                            <form action="{%url 'pdf_comite'%}" method="post" target="_blank">
                                {% csrf_token %}
                                <h3 style="border-radius: 15px; width: auto; background-color: #dee2e6; text-align: center;">LLenar Formulario</h3>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="asunto">Asunto: (Máx. 30 caracteres)</label>
                                            <input type="text" id="asunto" name="asunto" class="form__field" placeholder="Expresar de manera breve el motivo de la solicitud" maxlength="30" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="nombre">Nombre o Nombres:</label>
                                            <input type="text" name="nombre" id="nombre" class="form__field" required>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="papellido">Primer Apellido:</label>
                                            <input type="text" name="papellido" id="papelllido" class="form__field" required>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="sapellido">Segundo Apellido:</label>
                                            <input type="text" name="sapellido" id="sapellido" class="form__field" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="carrera">Carrera:</label>
                                            <input type="text" name="carrera" id="carrera" class="form__field" required>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="semestre">Semestre:</label>
                                            <input type="number" name="semestre" id="semestre" class="form__field" required>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="ncontrol">No. Control:</label>
                                            <input type="text" name="ncontrol" id="ncontrol" class="form__field" required>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="solicitud">Solicito de la manera más atenta: (Máx. 250 caractéres)</label>
                                            <textarea name="solicitud" id="solicitud" cols="30" rows="3" maxlength="250" class="form__field" style="background-color: #ECECEC;" required></textarea>
                                        </div>
                                    </div>
                                </div>
                                <h3 style="border-radius: 15px; width: auto; background-color: #dee2e6; text-align: center; margin-top: 25px;">Por los motivos:</h3>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="macademico">Motivos Académicos: (Máx. 230 caractéres)</label>
                                            <textarea name="macademicos" id="macademicos" cols="30" rows="3" maxlength="230" class="form__field" style="background-color: #ECECEC;" ></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="mpersonal">Motivos Personales: (Máx. 230 caractéres)</label>
                                            <textarea name="mpersonal" id="mpersonal" cols="30" rows="3" class="form__field" maxlength="230" style="background-color: #ECECEC;" ></textarea>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="motros">Otros: (Máx. 100 caractéres)</label>
                                            <textarea name="motros" id="motros" cols="30" rows="3" maxlength="100" class="form__field" style="background-color: #ECECEC;" ></textarea>
                                        </div>
                                    </div>
                                </div>
                                <h3 style="border-radius: 15px; width: auto; background-color: #dee2e6; text-align: center; margin-top: 25px;">Datos de contacto:</h3>
                                <div class="row">
                                    <div class="col">
                                        <div class="form__group" style="width: 100%;">
                                            <label for="tel">Teléfono: </label>
                                            <input type="text" name="tel" id="tel" class="form__field" required>
                                        </div>
                                    </div>
                                    <div class="col">
                                        <div class="form__group" style="width: 100%">
                                            <label for="correo">Correo:</label>
                                            <input type="mail" name="correo" id="correo" class="form__field" required>
                                        </div>
                                    </div>
                                </div>
                                <button type="submit" class="btn btn-warning" style="width: 50%; margin: 2rem 25% 3rem 25%; border-radius: 15px;">Generar</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        {% endblock %}
        <script src="{% static 'JS/drag_drop.js' %}"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js " integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8 " crossorigin="anonymous "></script>

    </body>
    {%else%}
    <style>
        body {
            background-color: #2b2d42;
            align-items: center;
        }
    </style>
    <div class="modal-dialog modal-dialog-centered" style="margin-top: 10%;">
        <div class="modal-content" style="background-color: #e9ecef;">
            <div class="modal-header">
                <div class="row">
                    <h5 class="modal-title" id="staticBackdropLabel">
                        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-exclamation" class="svg-inline--fa fa-circle-exclamation" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="1.5rem" width="1.5rem">
                        <path fill="currentColor" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z">
                        </path>
                    </svg> ¡Atención!</h5>
                </div>

            </div>
            <div class="modal-body">
                <div class="row">
                    <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="circle-exclamation" class="svg-inline--fa fa-circle-exclamation" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" height="4rem" width="4rem" color="#ba181b">
                        <path fill="currentColor" d="M256 0C114.6 0 0 114.6 0 256s114.6 256 256 256s256-114.6 256-256S397.4 0 256 0zM232 152C232 138.8 242.8 128 256 128s24 10.75 24 24v128c0 13.25-10.75 24-24 24S232 293.3 232 280V152zM256 400c-17.36 0-31.44-14.08-31.44-31.44c0-17.36 14.07-31.44 31.44-31.44s31.44 14.08 31.44 31.44C287.4 385.9 273.4 400 256 400z">
                        </path>
                    </svg>
                </div>
                <br>
                <h6 style="text-align: center;">No tiene autorización para visualizar este contenido</h6>
                <a href="{% url 'logout' %}" style="width: 50%; margin: 2rem 25% 3rem 25%; border-radius: 15px;" class="btn btn-warning"> Salir</a>
            </div>
        </div>
    </div>
    {% endif %}

</html>